
<html><head>
<title>tclyaml - TclYAML</title>
<style type="text/css"><!--
    HTML {
	background: 	#FFFFFF;
	color: 		black;
    }
    BODY {
	background: 	#FFFFFF;
	color:	 	black;
    }
    DIV.doctools {
	margin-left:	10%;
	margin-right:	10%;
    }
    DIV.doctools H1,DIV.doctools H2 {
	margin-left:	-5%;
    }
    H1, H2, H3, H4 {
	margin-top: 	1em;
	font-family:	sans-serif;
	font-size:	large;
	color:		#005A9C;
	background: 	transparent;
	text-align:		left;
    }
    H1.title {
	text-align: center;
    }
    UL,OL {
	margin-right: 0em;
	margin-top: 3pt;
	margin-bottom: 3pt;
    }
    UL LI {
	list-style: disc;
    }
    OL LI {
	list-style: decimal;
    }
    DT {
	padding-top: 	1ex;
    }
    UL.toc,UL.toc UL, UL.toc UL UL {
	font:		normal 12pt/14pt sans-serif;
	list-style:	none;
    }
    LI.section, LI.subsection {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding: 	0em;
    }
    PRE {
	display: 	block;
	font-family:	monospace;
	white-space:	pre;
	margin:		0%;
	padding-top:	0.5ex;
	padding-bottom:	0.5ex;
	padding-left:	1ex;
	padding-right:	1ex;
	width:		100%;
    }
    PRE.example {
	color: 		black;
	background: 	#f5dcb3;
	border:		1px solid black;
    }
    UL.requirements LI, UL.syntax LI {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding:	0em;
    }
    DIV.synopsis {
	color: 		black;
	background: 	#80ffff;
	border:		1px solid black;
	font-family:	serif;
	margin-top: 	1em;
	margin-bottom: 	1em;
    }
    UL.syntax {
	margin-top: 	1em;
	border-top:	1px solid black;
    }
    UL.requirements {
	margin-bottom: 	1em;
	border-bottom:	1px solid black;
    }
--></style>
</head>
<! -- Generated from file '/net/nas/data/andreask/Dev/YAML/tclyaml/embedded/www/doc/files/tclyaml.html' by tcllib/doctools with format 'html'
   -->
<! -- Copyright &copy; 2012 Andreas Kupries   -- Copyright &copy; 2012 Documentation, Andreas Kupries
   -->
<! -- CVS: $Id$ tclyaml.n
   -->
<body><div class="doctools">
<hr> [
  <a href="../../toc.html">Main Table Of Contents</a>
| <a href="../toc.html">Table Of Contents</a>
| <a href="../../index.html">Keyword Index</a>
] <hr>
<h1 class="title">tclyaml(n) 0.1 doc &quot;TclYAML&quot;</h1>
<div id="name" class="section"><h2><a name="name">Name</a></h2>
<p>tclyaml - TclYAML - API</p>
</div>
<div id="toc" class="section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="toc">
<li class="section"><a href="#toc">Table Of Contents</a></li>
<li class="section"><a href="#synopsis">Synopsis</a></li>
<li class="section"><a href="#section1">Description</a></li>
<li class="section"><a href="#section2">Parsing YAML</a></li>
<li class="section"><a href="#section3">Generating YAML</a></li>
<li class="section"><a href="#section4">Bugs, Ideas, Feedback</a></li>
<li class="section"><a href="#keywords">Keywords</a></li>
<li class="section"><a href="#category">Category</a></li>
<li class="section"><a href="#copyright">Copyright</a></li>
</ul>
</div>
<div id="synopsis" class="section"><h2><a name="synopsis">Synopsis</a></h2>
<div class="synopsis">
<ul class="requirements">
<li>package require <b class="pkgname">Tcl 8.5</b></li>
<li>package require <b class="pkgname">tclyaml <span class="opt">?0.1?</span></b></li>
</ul>
<ul class="syntax">
<li><a href="#1"><b class="cmd">tclyaml read channel</b> <i class="arg">chan</i></a></li>
<li><a href="#2"><b class="cmd">tclyaml read file</b> <i class="arg">path</i></a></li>
<li><a href="#3"><b class="cmd">tclyaml readTags channel</b> <i class="arg">chan</i></a></li>
<li><a href="#4"><b class="cmd">tclyaml readTags file</b> <i class="arg">path</i></a></li>
<li><a href="#5"><b class="cmd">tclyaml parse channel</b> <i class="arg">channel</i> <i class="arg">cmd</i>...</a></li>
<li><a href="#6"><b class="cmd">tclyaml write channel</b> <i class="arg">spec</i> <i class="arg">chan</i> <i class="arg">value</i></a></li>
<li><a href="#7"><b class="cmd">tclyaml write file</b> <i class="arg">spec</i> <i class="arg">path</i> <i class="arg">value</i></a></li>
<li><a href="#8"><b class="cmd">tclyaml write deftype</b> <i class="arg">name</i> <i class="arg">arguments</i> <i class="arg">body</i></a></li>
</ul>
</div>
</div>
<div id="section1" class="section"><h2><a name="section1">Description</a></h2>
<p>Welcome to TclYAML, a binding to the C-based libyaml parser
library for <a href="http://yaml.org">YAML</a> (YAML Ain't Markup Language).</p>
<p>This document is the reference manpage for the publicly visible API,
i.e. the API a user will see, and use.
This API falls into two big sections, for the generation of YAML from Tcl
data structures on one side, and the parsing of YAML into Tcl structures on
the other.</p>
</div>
<div id="section2" class="section"><h2><a name="section2">Parsing YAML</a></h2>
<dl class="definitions">
<dt><a name="1"><b class="cmd">tclyaml read channel</b> <i class="arg">chan</i></a></dt>
<dd></dd>
<dt><a name="2"><b class="cmd">tclyaml read file</b> <i class="arg">path</i></a></dt>
<dd><p>These two commands read the YAML documents found in the channel (<i class="arg">chan</i>),
or file (<i class="arg">path</i>) and return a Tcl list where each element represents a
single document found in the input.</p>
<p>For each document YAML scalars are converted to Tcl strings, and YAML
sequences and mappings to Tcl lists and dictionaries.</p></dd>
<dt><a name="3"><b class="cmd">tclyaml readTags channel</b> <i class="arg">chan</i></a></dt>
<dd></dd>
<dt><a name="4"><b class="cmd">tclyaml readTags file</b> <i class="arg">path</i></a></dt>
<dd><p>These two commands behave like their plain <b class="cmd">read</b> counterparts above,
except that the data structure they return per element is a <i class="term">tagged</i>
structure where each YAML construct is converted into a 2-element list of
type-tag and value (in this order).</p>
<p>While this type of structure is more difficult to access due to the
additional nesting levels, in return it does not lose YAML's type information.
This allows users to properly distinguish between lists and dictionaries, for
example, if the input YAML allows different syntax for specific keys. Another
example would be string versus list, for example in a key allowing one to many
things of some kind, and a string is the same as a list of one element. In an
untagged conversion these cases are difficult to impossible to distinguish.</p></dd>
<dt><a name="5"><b class="cmd">tclyaml parse channel</b> <i class="arg">channel</i> <i class="arg">cmd</i>...</a></dt>
<dd><p>This command provides the lowest level of access to the YAML parser. Reading
YAML data from the specified <i class="arg">channel</i> each structural element encountered
is reported through an invokation of the command prefix <i class="arg">cmd</i>...</p>
<p>This command prefix is invoked with two additional arguments, the type of
the found element, and a dictionary holding detailed information about it.</p>
<p>%%TODO%% Describe the 'events', and their dictionaries.</p></dd>
</dl>
</div>
<div id="section3" class="section"><h2><a name="section3">Generating YAML</a></h2>
<dl class="definitions">
<dt><a name="6"><b class="cmd">tclyaml write channel</b> <i class="arg">spec</i> <i class="arg">chan</i> <i class="arg">value</i></a></dt>
<dd></dd>
<dt><a name="7"><b class="cmd">tclyaml write file</b> <i class="arg">spec</i> <i class="arg">path</i> <i class="arg">value</i></a></dt>
<dd><p>These two commands convert the Tcl data structure <i class="arg">value</i> into YAML, under
the guidance of the type information in <i class="arg">spec</i>, which describes the expected
structure of the <i class="arg">value</i>, i.e. essentially provides type annotation/tagging
of the <i class="arg">value</i>, but separate from the value itself.</p>
<p>The resulting YAML is written to a channel (<i class="arg">chan</i>, expected to be
open for writing), or file (<i class="arg">path</i>). For the latter, an existing file is
overwritten.</p>
<p>%%TODO%% Describe structure of <i class="arg">spec</i>.</p></dd>
<dt><a name="8"><b class="cmd">tclyaml write deftype</b> <i class="arg">name</i> <i class="arg">arguments</i> <i class="arg">body</i></a></dt>
<dd><p>This command defines a new type conversion command <i class="arg">name</i> for use in the
<b class="cmd">tclyaml write ...</b> commands above.</p>
<p>The <i class="arg">arguments</i> are what has to be specified in a structure
specification (see <i class="arg">spec</i> above). Beyond these the <i class="arg">body</i> will have
access to three standard arguments named &quot;writer&quot;, &quot;structure&quot;, and &quot;value&quot;.</p>
<p>%%TODO%% describe the standard arguments.</p></dd>
</dl>
</div>
<div id="section4" class="section"><h2><a name="section4">Bugs, Ideas, Feedback</a></h2>
<p>This document, and the package it describes, will undoubtedly contain
bugs and other problems.
Please report such at the <a href="http://chiselapp.com/user/andreas_kupries/repository/tclyaml">TclYAML Tracker</a>.
Please also report any ideas for enhancements you may have for either
package and/or documentation.</p>
</div>
<div id="keywords" class="section"><h2><a name="keywords">Keywords</a></h2>
<p><a href="../../index.html#key2">YAML</a>, <a href="../../index.html#key0">markup language</a>, <a href="../../index.html#key1">serialization</a></p>
</div>
<div id="category" class="section"><h2><a name="category">Category</a></h2>
<p>3rd party library binding</p>
</div>
<div id="copyright" class="section"><h2><a name="copyright">Copyright</a></h2>
<p>Copyright &copy; 2012 Andreas Kupries<br>
Copyright &copy; 2012 Documentation, Andreas Kupries</p>
</div>
</div></body></html>
